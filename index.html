<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reserva tu cita - ClÃ­nica Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    input[type="tel"] {
      -webkit-appearance: none;
      appearance: none;
    }

    input::-ms-clear,
    input::-ms-reveal {
      display: none;
      width: 0;
      height: 0;
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-900">
  <div class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm">
      <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div class="w-9 h-9 rounded-full bg-sky-500 flex items-center justify-center text-white font-bold">
            D
          </div>
          <div>
            <p class="font-semibold">ClÃ­nica Derm Demo</p>
            <p class="text-xs text-slate-500">DermatologÃ­a Â· EstÃ©tica Â· LÃ¡ser</p>
          </div>
        </div>
        <span class="text-xs md:text-sm text-slate-500">Demo n8n</span>
      </div>
    </header>

    <!-- Main -->
    <main class="flex-1">
      <section class="max-w-4xl mx-auto px-4 py-10 grid md:grid-cols-2 gap-10 items-center">

        <!-- Copy -->
        <div class="space-y-5">
          <h1 class="text-3xl md:text-4xl font-bold leading-tight">
            Reserva tu cita en <span class="text-sky-600">menos de 1 minuto</span>
          </h1>
          <p class="text-slate-600">
            Completa este formulario y recibirÃ¡s confirmaciÃ³n automÃ¡tica.
          </p>

          <ul class="space-y-2 text-sm text-slate-700">
            <li>âœ… NotificaciÃ³n instantÃ¡nea al equipo</li>
            <li>âœ… ConfirmaciÃ³n automÃ¡tica por WhatsApp</li>
            <li>âœ… Datos listos para CRM / Sheets</li>
          </ul>

          <div class="p-3 rounded-xl bg-sky-50 border border-sky-100 text-xs text-sky-700">
            Demo real conectada a n8n.
          </div>
        </div>

        <!-- Form -->
        <div class="bg-white shadow-md rounded-2xl p-6 border border-slate-100">
          <h2 class="text-lg font-semibold mb-4">Datos para la cita</h2>

          <form id="leadForm" class="space-y-4">

            <!-- Nombre -->
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1" for="name">
                Nombre completo
              </label>
              <input id="name" name="name" type="text" required
                class="w-full h-11 rounded-xl border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                placeholder="Ej. MarÃ­a LÃ³pez" />
            </div>

            <!-- Email (lÃ­nea aparte) -->
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1" for="email">
                Email
              </label>
              <input id="email" name="email" type="email" required
                class="w-full h-11 rounded-xl border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                placeholder="Ej. nombre@correo.com" />
            </div>

            <!-- TelÃ©fono (lÃ­nea aparte + full width) -->
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">
                TelÃ©fono (con prefijo)
              </label>

              <div class="flex gap-2 items-stretch">
                <select id="countryCode" name="countryCode" required
                  class="w-32 h-11 rounded-xl border border-slate-200 px-3 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500">
                  <option value="+34" selected>ğŸ‡ªğŸ‡¸ +34</option>
                  <option value="+351">ğŸ‡µğŸ‡¹ +351</option>
                  <option value="+33">ğŸ‡«ğŸ‡· +33</option>
                  <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
                  <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
                  <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
                  <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
                  <option value="+57">ğŸ‡¨ğŸ‡´ +57</option>
                  <option value="+593">ğŸ‡ªğŸ‡¨ +593</option>
                  <option value="+212">ğŸ‡²ğŸ‡¦ +212</option>
                </select>

                <input id="phone" name="phone" type="tel" inputmode="numeric" autocomplete="tel" required
                  class="flex-1 h-11 min-w-0 rounded-xl border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                  placeholder="Ej. 653123456" />
              </div>

              <p class="text-[11px] text-slate-500 mt-1">
                Escribe el nÃºmero sin espacios.
              </p>
            </div>

            <!-- Tratamiento -->
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1" for="treatment">
                Tratamiento de interÃ©s
              </label>
              <select id="treatment" name="treatment" required
                class="w-full h-11 rounded-xl border border-slate-200 px-3 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500">
                <option value="">Selecciona una opciÃ³n</option>
                <option value="acne">AcnÃ©</option>
                <option value="rosacea">RosÃ¡cea</option>
                <option value="manchas-laser">Manchas / LÃ¡ser</option>
                <option value="relleno-labios">Relleno de labios</option>
                <option value="antiaging">Tratamientos anti-aging</option>
                <option value="ginecoestetica">GinecoestÃ©tica</option>
                <option value="otros">Otros</option>
              </select>
            </div>

            <!-- Comentarios -->
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1" for="message">
                Comentarios (opcional)
              </label>
              <textarea id="message" name="message" rows="3"
                class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                placeholder="CuÃ©ntanos brevemente quÃ© te gustarÃ­a tratar."></textarea>
            </div>

            <!-- BotÃ³n -->
            <button type="submit" id="submitBtn"
              class="w-full h-11 inline-flex items-center justify-center gap-2 rounded-xl bg-sky-600 text-white text-sm font-medium hover:bg-sky-700 transition disabled:opacity-60 disabled:cursor-not-allowed">
              Enviar solicitud de cita
            </button>

            <p id="formStatus" class="text-xs mt-2 h-4"></p>
          </form>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-100">
      <div class="max-w-4xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-2">
        <p class="text-xs text-slate-500">
          Demo creada con <span class="font-semibold">Netlify</span> + <span class="font-semibold">n8n</span>.
        </p>
        <p class="text-xs text-slate-400">AutomatizaciÃ³n para clÃ­nicas.</p>
      </div>
    </footer>
  </div>

  <script>
    // ğŸ‘‰ PON AQUÃ TU WEBHOOK DE N8N
    const WEBHOOK_URL = "https://n8n.decotea.es/webhook/dermaniac-web";

    const form = document.getElementById("leadForm");
    const statusEl = document.getElementById("formStatus");
    const submitBtn = document.getElementById("submitBtn");

    // Limpia el phone mientras escriben (opcional, mejora UX)
    const phoneInput = document.getElementById("phone");
    phoneInput.addEventListener("input", () => {
      phoneInput.value = phoneInput.value.replace(/[^\d]/g, "");
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      statusEl.textContent = "";
      submitBtn.disabled = true;
      submitBtn.textContent = "Enviando...";

      const name = form.name.value.trim();
      const email = form.email.value.trim();
      const countryCode = form.countryCode.value; // ej: "+34"
      const phone = form.phone.value.trim();       // ej: "604319181"
      const treatment = form.treatment.value;
      const message = form.message.value.trim();

      const payload = {
        name,
        email,
        countryCode,
        phone,
        treatment,
        message,
        source: "netlify-landing-demo",
        submittedAt: new Date().toISOString()
      };

      try {
        const res = await fetch(WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (!res.ok) throw new Error("Error al llamar al webhook");

        statusEl.textContent = "âœ… Hemos recibido tu solicitud. Te contactaremos en breve.";
        statusEl.className = "text-xs mt-2 text-emerald-600";
        form.reset();
      } catch (err) {
        console.error(err);
        statusEl.textContent = "âŒ Ha ocurrido un error. IntÃ©ntalo de nuevo en unos minutos.";
        statusEl.className = "text-xs mt-2 text-red-600";
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = "Enviar solicitud de cita";
      }
    });
  </script>
</body>

</html>
